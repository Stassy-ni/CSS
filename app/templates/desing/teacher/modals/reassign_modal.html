<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Assign To Classes Modal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../teacher.css" rel="stylesheet">
</head>
<body class="p-4">

<button type="button" class="btn btn-primary mb-3"
        data-bs-toggle="modal"
        data-bs-target="#reassignModal">
  Посмотреть модалку
</button>  
  
<div class="modal fade" id="reassignModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 p-3">
      <h5 class="mb-3">Выдать задание другим классам</h5>
      <div class="mb-3">
        <div class="dropdown">
          <button class="btn btn-outline-secondary w-100 dropdown-toggle" type="button" data-bs-toggle="dropdown">
            Выбрать классы
          </button>
          <ul class="dropdown-menu w-100" id="dropdownList">
            <li><a class="dropdown-item" href="#" onclick="addClass('5А')">5А</a></li>
            <li><a class="dropdown-item" href="#" onclick="addClass('5Б')">5Б</a></li>
            <li><a class="dropdown-item" href="#" onclick="addClass('6А')">6А</a></li>
          </ul>
        </div>
      </div>
      <div id="selectedTags" class="mb-3"></div>
      <div id="selectedClasses"></div>
      <div class="text-end mt-3">
        <button class="btn btn-primary" onclick="assignTask()"><i class="bi bi-send"></i> Выдать</button>
      </div>
    </div>
  </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3">
  <div class="toast" id="notifyToast" role="alert">
    <div class="toast-body bg-success text-white rounded-3">
      <span id="notifyText">Задание выдано!</span>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
<script>
const selectedTags = document.getElementById('selectedTags');
const selectedClasses = document.getElementById('selectedClasses');
const selected = new Set();
function addClass(className) {
  if (selected.has(className)) return;
  selected.add(className);
  render();
}
function removeClass(className) {
  selected.delete(className);
  render();
}
function render() {
  selectedTags.innerHTML = '';
  selectedClasses.innerHTML = '';
  selected.forEach(cls => {
    selectedTags.innerHTML += `<span class="tag">${cls} <i class="bi bi-x" onclick="removeClass('${cls}')"></i></span>`;
    selectedClasses.innerHTML += `
      <div class="row align-items-center mb-2">
        <div class="col-2 fw-semibold">${cls}</div>
        <div class="col-4"><input type="date" class="form-control form-control-sm date-input"></div>
        <div class="col-4"><input type="date" class="form-control form-control-sm date-input"></div>
        <div class="col-2 text-end"><i class="bi bi-x-lg cursor-pointer" onclick="removeClass('${cls}')"></i></div>
      </div>`;
  });
}
function assignTask() {
  bootstrap.Modal.getInstance(document.getElementById('reassignModal')).hide();
  showToast('Задание успешно выдано выбранным классам');
}
function showToast(text) {
  document.getElementById('notifyText').innerText = text;
  new bootstrap.Toast(document.getElementById('notifyToast')).show();
}
</script>
</body>
</html>