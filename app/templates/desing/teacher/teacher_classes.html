<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Мои классы — Учитель</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="theme.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f8f9fa; /* gray-100 */
    }
    .class-card {
      border: 1px solid #dee2e6;
      border-radius: 1rem;
      background: #fff;
      transition: box-shadow 0.15s;
      cursor: pointer;
    }
    .class-card:hover {
      box-shadow: 0 6px 30px rgba(13, 110, 253, 0.05);
    }
    .class-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #212529;
    }
    .class-badge {
      background: #dee2e6;
      color: #343a40;
      font-size: 0.9rem;
    }
    .menu-dots {
      border: none;
      background: none;
      color: #adb5bd;
      font-size: 1.4rem;
    }
    .menu-dots:hover {
      color: #0d6efd;
      background: #f1f5fe;
      border-radius: 50%;
    }
    .btn-add-class {
      border: 1px solid #dee2e6;
      background: #ffffff;
      color: #0d6efd;
      font-weight: 600;
      padding: 8px 20px;
      border-radius: 8px;
    }
    .btn-add-class:hover {
      background: #f1f5fe;
    }
    .dropdown-menu {
      font-size: 0.95rem;
    }
    .search-input {
      max-width: 300px;
    }

    .class-card {
  border: 1px solid #dee2e6;
  border-radius: 1rem;
  background: #fff;
  transition: box-shadow 0.15s;
  cursor: pointer;
  max-width: 260px;
  min-height: 170px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.class-card:hover {
  box-shadow: 0 6px 30px rgba(13, 110, 253, 0.07);
}

.class-title {
  font-size: 1.4rem;
  font-weight: 700;
  color: #212529;
}

.class-badge {
  background: #dee2e6;
  color: #343a40;
  font-size: 0.9rem;
  padding: 4px 8px;
  border-radius: 0.5rem;
}

.menu-dots {
  border: none;
  background: none;
  color: #adb5bd;
  font-size: 1.4rem;
  padding: 0;
}

.menu-dots:hover {
  color: #0d6efd;
  background: #f1f5fe;
  border-radius: 50%;
}

.icon-action {
  color: #495057;
  font-size: 1.5rem;
  text-decoration: none;
}

.icon-action:hover {
  color: #0d6efd;
}

  </style>
</head>
<body>

  <!-- Навигация -->
  <nav class="navbar navbar-expand-lg bg-white border-bottom mb-4">
    <div class="container-fluid">
      <span class="navbar-brand fw-bold">[LOGO]</span>
      <div class="navbar-nav ms-auto">
        <a class="nav-link active" href="#">Мои классы</a>
        <a class="nav-link" href="#">Мои задания</a>
        <a class="nav-link" href="#">Диагностика</a>
        <a class="nav-link" href="#">Аналитика</a>
        <div class="nav-item dropdown ms-3">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
            <i class="bi bi-person"></i> Иван
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#">Профиль</a></li>
            <li><a class="dropdown-item text-danger" href="#">Выйти</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Контент -->
  <div class="container-lg pb-5">
    <!-- Заголовок и кнопка -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h1 class="fw-bold mb-0 fs-2">Мои классы</h1>
        <div class="text-muted small mt-1">Всего классов: <b>5</b> &nbsp;|&nbsp; Ученики: <b>148</b></div>
      </div>
      <button class="btn btn-add-class" onclick="showAddClassModal()">
        <i class="bi bi-plus-lg"></i> Добавить класс
      </button>
    </div>

    <!-- Поиск и фильтры -->
    <div class="row align-items-center mb-4">
      <div class="col-auto">
        <input type="text" class="form-control search-input" placeholder="Поиск по классу..." onkeyup="searchClasses(this.value)">
      </div>
      <div class="col-auto">
        <select class="form-select" onchange="filterClasses(this.value)">
          <option value="">Фильтр</option>
          <option value="current">Текущие</option>
          <option value="archive">Архив</option>
        </select>
      </div>
      <div class="col-auto">
        <select class="form-select" onchange="filterByGrade(this.value)">
          <option value="">Все параллели</option>
          <option value="5">5 классы</option>
          <option value="6">6 классы</option>
          <option value="7">7 классы</option>
          <option value="8">8 классы</option>
          <option value="9">9 классы</option>
          <option value="10">10 классы</option>
          <option value="11">11 классы</option>
        </select>
      </div>
    </div>


    <!-- Сетка классов -->
    <div class="row row-cols-1 row-cols-md-5 g-4" id="classesGrid">
      <!-- Карточка класса -->
      <div class="col">
        <div class="card class-card position-relative">
          <div class="p-3">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="class-title mb-2 fs-2">5 «Б»</div>
                <div class="text-muted small">24 ученика</div>
              </div>
              <div class="dropdown">
                <button class="menu-dots" data-bs-toggle="dropdown" aria-expanded="false" title="Управление">
                  <i class="bi bi-three-dots-vertical"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li><a class="dropdown-item" href="#">Архивировать</a></li>
                  <li><a class="dropdown-item text-danger" href="#">Удалить</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="card-footer bg-light d-flex justify-content-left gap-4 py-3 border-0">
            <a href="#" class="icon-action" data-bs-toggle="tooltip" title="Задания">
              <i class="bi bi-journals fs-5"></i>
            </a>
            <a href="#" class="icon-action" data-bs-toggle="tooltip" title="Аналитика">
              <i class="bi bi-bar-chart-line fs-5"></i>
            </a>
          </div>
        </div>
      </div>
      <!-- Ещё карточки -->
    </div>
  </div>

  <!-- Модалка добавления класса с расписанием -->
  <div class="modal fade" id="addClassModal" tabindex="-1" aria-labelledby="addClassModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-4">
        <div class="modal-header">
          <h5 class="modal-title" id="addClassModalLabel">Добавить новый класс</h5>
        </div>
        <div class="modal-body">
          <form id="addClassForm">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="classNum" class="form-label">Номер класса</label>
                <select class="form-select" id="classNum" required>
                  <option value="">Выберите...</option>
                  <option>5</option><option>6</option><option>7</option>
                  <option>8</option><option>9</option><option>10</option><option>11</option>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label for="classLetter" class="form-label">Буква класса</label>
                <input type="text" class="form-control" id="classLetter" maxlength="2" style="text-transform:uppercase;" required>
              </div>
            </div>

            <hr class="my-3">

            <h6 class="fw-semibold mb-2">Расписание уроков (необязательно)</h6>

            <div id="scheduleList" class="mb-3"></div>

            <div class="row align-items-end g-2">
              <div class="col-5">
                <select class="form-select" id="newDay">
                  <option value="">День недели</option>
                  <option>Пн</option><option>Вт</option><option>Ср</option>
                  <option>Чт</option><option>Пт</option><option>Сб</option>
                </select>
              </div>
              <div class="col-3">
                <input type="time" class="form-control" id="newStartTime">
              </div>
              <div class="col-3">
                <input type="time" class="form-control" id="newEndTime">
              </div>
              <div class="col-1">
                <button class="btn btn-outline-secondary w-100" type="button" onclick="addScheduleRow()">+</button>
              </div>
            </div>

          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
          <button class="btn btn-primary" onclick="addClass()">Создать</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let scheduleCounter = 0;

    function addScheduleRow() {
      const day = document.getElementById('newDay').value;
      const start = document.getElementById('newStartTime').value;
      const end = document.getElementById('newEndTime').value;

      if (!day || !start || !end) {
        alert("Пожалуйста, заполните день и время.");
        return;
      }

      const scheduleList = document.getElementById('scheduleList');

      const row = document.createElement("div");
      row.classList.add("d-flex", "align-items-center", "mb-2");
      row.innerHTML = `
        <div class="flex-grow-1">${day} ${start}–${end}</div>
        <button type="button" class="btn btn-sm btn-outline-danger" onclick="this.parentElement.remove()">
          <i class="bi bi-x"></i>
        </button>
        <input type="hidden" name="schedule[${scheduleCounter}][day]" value="${day}">
        <input type="hidden" name="schedule[${scheduleCounter}][start]" value="${start}">
        <input type="hidden" name="schedule[${scheduleCounter}][end]" value="${end}">
      `;
        scheduleList.appendChild(row);

      scheduleCounter++;

      // очищаем форму после добавления строки
      document.getElementById('newDay').value = "";
      document.getElementById('newStartTime').value = "";
      document.getElementById('newEndTime').value = "";
    }

    function filterByGrade(grade) {
      // Здесь уже внутри просто фильтруем видимые карточки
      console.log("Фильтрация по параллели: " + grade);
    }

    function showAddClassModal() {
      var modal = new bootstrap.Modal(document.getElementById('addClassModal'));
      modal.show();
    }
    function addClass() {
      alert('Класс добавлен! (добавить backend сохранение)');
      var modal = bootstrap.Modal.getInstance(document.getElementById('addClassModal'));
      modal.hide();
    }
    function goToClass(num, letter) {
      window.location.href = `/teacher/class/${num}${letter}`;
    }
    function searchClasses(val) { /* Поиск по названию класса */ }
    function filterClasses(val) { /* Фильтрация текущие/архив */ }
    function sortClasses(val) { /* Сортировка */ }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
